<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:tk="http://jviewer.tk/main"
    xmlns:p="http://primefaces.org/ui">

<f:view locale="#{localeModel.currentLocale}"/>
<h:head>
    <title>#{msg['J68']} #{viewerDialog.roomName}</title>
    <h:outputStylesheet library="css" name="jviewer.css"/>
</h:head>

<h:body>
    <h:form>
        <h:commandLink action="#{localeModel.switchLocale('en')}">
            <h:graphicImage library="images" name="us_logo.png"/>
        </h:commandLink>
    </h:form>
    <h:form>
        <h:commandLink action="#{localeModel.switchLocale('ru')}">
            <h:graphicImage library="images" name="ru_logo.png"/>
        </h:commandLink>
    </h:form>
    #{msg['J63']}: <h:outputText id="currentRoom" value="#{viewerDialog.roomName}"/>

    <h:form id="displayForm">
        <h:panelGroup layout="block" rendered="#{viewerDialog.roomType == 'JAVA'}">
            <tk:javaViewer bean="#{javaViewerTag}" editPermissions="#{viewerDialog.hasEditPermissions()}">
                <p:commandButton value="#{msg['J66']}" action="main?faces-redirect=true" immediate="true" process="@this"/>
                <p:commandButton value="#{msg['J67']}" action="#{viewerDialog.logout}" onclick="leaveRoom();" immediate="true" process="@this"/>
            </tk:javaViewer>
        </h:panelGroup>
        <h:panelGroup layout="block" rendered="#{viewerDialog.roomType == 'HTML'}">
            <tk:htmlViewer editPermissions="#{viewerDialog.hasEditPermissions()}" >
                <p:commandButton value="#{msg['J66']}" action="main?faces-redirect=true" immediate="true" process="@this"/>
                <p:commandButton value="#{msg['J67']}" action="#{viewerDialog.logout}" onclick="leaveRoom();" immediate="true" process="@this"/>
            </tk:htmlViewer>
        </h:panelGroup>
    </h:form>

    <tk:connection channel="/#{viewerDialog.roomName}" sendingAllowed="#{viewerDialog.hasEditPermissions()}"/>
</h:body>

</html>