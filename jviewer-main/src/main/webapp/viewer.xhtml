<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

<f:view locale="#{localeModel.currentLocale}"/>
<h:head>
    <title>#{msg['J68']} #{userProfile.currentRoom}</title>
    <h:outputStylesheet library="css" name="jviewer.css"/>

    <h:outputScript library="js" name="chat_admin.js" rendered="#{viewerDialog.hasEditPermissions()}"/>
    <h:outputScript library="js" name="chat_user.js" rendered="#{!viewerDialog.hasEditPermissions()}"/>
</h:head>

<h:body onload="initViewer()">
    <h:form>
        <h:commandLink action="#{localeModel.switchLocale('en')}">
            <h:graphicImage library="images" name="us_logo.png"/>
        </h:commandLink>
    </h:form>
    <h:form>
        <h:commandLink action="#{localeModel.switchLocale('ru')}">
            <h:graphicImage library="images" name="ru_logo.png"/>
        </h:commandLink>
    </h:form>
    #{msg['J63']}: <h:outputText id="currentRoom" value="#{viewerDialog.currentRoom}"/>
        <h:form id="displayForm">
            <p:commandButton value="#{msg['J64']}" onclick="executeCode();" rendered="#{viewerDialog.hasEditPermissions()}"/>
            <p:commandButton value="#{msg['J65']}" onclick="clearIO();" rendered="#{viewerDialog.hasEditPermissions()}"/>
            <p:commandButton value="#{msg['J66']}" action="main?faces-redirect=true"/>
            <p:commandButton value="#{msg['J67']}" action="#{viewerDialog.logout}" onclick="leaveRoom();"/>
            <pe:codeMirror mode="htmlmixed" lineNumbers="true" lineWrapping="true" matchBrackets="true"
                theme="eclipse" escape="false" widgetVar="viewerContent" readonly="#{!viewerDialog.hasEditPermissions()}">
                <pe:javascript event="change" execute="sendContent()"/>
            </pe:codeMirror>
            <br/>
            <iframe id="result" frameBorder="0" width="1900" height="300"></iframe>

        </h:form>
</h:body>

</html>