<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:tk="http://jviewer.tk/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">
<h:head>
    <title>Новости</title>
    <link rel="icon" type="image/x-icon" href="resources/images/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="resources/css/news.css"/>
</h:head>
<h:body>
    <tk:template id="template" currentPage="NEWS">
        <p:dataList id="news" value="#{newsController.news}" var="news" varStatus="status">
            <div class="page-header">
                <h2><h:outputText value="#{news.topic}"/>
                    <h:form rendered="#{userModel.authenticated}">
                        <p:commandLink actionListener="#{newsController.deleteNews(news.id)}" update=":template:news">
                            <h:graphicImage library="images" name="button_delete.png" />
                        </p:commandLink>
                    </h:form>
                </h2>
                <small style="font-size: 75%"><h:outputText value="#{news.date} by #{news.author}"/></small>
                <br/>
                <pe:ckEditor value="#{news.text}" customConfig="resources/plugins/ckeditor/config.js" />
            </div>
        </p:dataList>
        <h:panelGroup layout="block" rendered="#{userModel.authenticated}">
            <h:form id="writeNews">
                <p:inputText value="#{newsModel.topic}" styleClass="form-control" placeholder="Тема" required="true"/>
                <br/>
                    <pe:ckEditor value="#{newsModel.text}" required="true"/>
                <br/>
                <p:commandButton styleClass="btn btn-primary btn-lg btn-block" value="Опубликовать"
                                 action="#{newsController.addNews}" />
            </h:form>
            <br/>
        </h:panelGroup>
    </tk:template>
</h:body>
</html>
